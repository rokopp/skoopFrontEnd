<div class="container-fluid m-0">
  <div class="row m-0">

    <div class="col-12 text-center my-4">
      <h1>Editing Question Set {{setName}}</h1>
    </div>
  </div>

  <div class="container">
    <div class="row m-0 text-center">
      <div class="col-sm-12 col-md-12 col-lg-10 " id="questions">
        <h2>View created Questions</h2>
        <!--Using mat-table from Angular Material, check the API at https://material.angular.io/components/table/api-->
        <!--TODO: notify table of updates via renderRows()-->
        <!--Excuse me, mr table, but umm.. renderCows.. i meant.. renderRows()!-->
        <table mat-table [dataSource]="questionSet">

          <!-- ID column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef class="text-center">ID</th>
            <td mat-cell *matCellDef="let elem">{{elem.id}}</td>
          </ng-container>

          <!-- Question column -->
          <ng-container matColumnDef="question">
            <th mat-header-cell *matHeaderCellDef class="text-center">Question</th>
            <td mat-cell *matCellDef="let elem">{{elem.questionText}}</td>
          </ng-container>

          <!-- Answer column -->
          <ng-container matColumnDef="answer">
            <th mat-header-cell *matHeaderCellDef class="text-center">Answer</th>
            <td mat-cell *matCellDef="let elem">{{elem.answer}}</td>
          </ng-container>

          <!-- Type column -->
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef class="text-center">Type</th>
            <td mat-cell *matCellDef="let elem">{{elem.type}}</td>
          </ng-container>

          <!-- Hint column -->
          <ng-container matColumnDef="hint">
            <th mat-header-cell *matHeaderCellDef class="text-center">Type</th>
            <td mat-cell *matCellDef="let elem">{{elem.hint}}</td>
          </ng-container>

          <!-- Action column
              Edit and Delete functions
              If Edit is clicked on a certain row, change it for Update to Update Question
              On edit data is written into our Question form.
          -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef class="text-center"> Action </th>
            <td mat-cell *matCellDef="let element" class="action-link">
              <a (click)="editQuestion(element); openModal('custom-modal-1', element);"
                 class="btn btn-outline-dark w-auto">Edit</a>
<!--              <ng-template #update>-->
<!--                <a (click)="updateQuestion(element)" class="btn btn-outline-info w-auto">Update</a>-->
<!--              </ng-template>-->
              <a (click)="deleteQuestion(element)" class="btn btn-outline-danger w-auto margin-t2
              mt-lg-0 margin-l2-btn">Delete</a>
            </td>
          </ng-container>

          <!-- Draw rows and columns -->
          <tr mat-header-row  *matHeaderRowDef="columnsToDisplay"></tr>
          <tr mat-row class="row-height" *matRowDef="let row; columns: columnsToDisplay"></tr>
        </table>
      </div>
<!--      <div class="col-sm-12 col-md-12 col-lg-6 form text-center">-->
<!--        <h2>Create new Question</h2>-->
<!--        <form class="question-form">-->

<!--          <mat-form-field class="question" appearance="outline">-->
<!--            <mat-label>Question</mat-label>-->
<!--            <input id="question" matInput name="question" type="text" required>-->
<!--          </mat-form-field>-->

<!--          <br>-->

<!--          <mat-form-field class="choices text-center mb-3">-->
<!--            <mat-chip-list #chipList aria-label="Choices">-->
<!--              <mat-chip *ngFor="let choice of choices; let id = index" [selectable]="selectable" [removable]="removable"-->
<!--                        (removed)="remove(choice)" color="green" [ngClass]="setBg(id)" [attr.isSelected]="false" (click)="selectCorrectAnswer(id, choice)" id="choice_{{id}}">-->
<!--                {{choice.text}}-->
<!--                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>-->
<!--              </mat-chip>-->
<!--              <input [required] placeholder="Valikvastused: vajuta Enter et lisada ja Delete et kustutada. Lisaks vajuta et valida õige vastus"-->
<!--                     [matChipInputFor]="chipList"-->
<!--                     [matChipInputSeparatorKeyCodes]="separatorKeysCodes"-->
<!--                     [matChipInputAddOnBlur]="addOnBlur"-->
<!--                     (matChipInputTokenEnd)="addAnswer($event)">-->
<!--            </mat-chip-list>-->
<!--          </mat-form-field>-->

<!--          <br>-->

<!--          <mat-form-field class="correctAnswer text-center mx-md-auto mr-lg-2 mb-lg-3" style="" appearance="fill">-->
<!--            <mat-label style="">Correct answer</mat-label>-->
<!--            <input id="answer" type="text" matInput name="answer" required>-->
<!--          </mat-form-field>-->

<!--          <mat-form-field class="points text-center ml-lg-2" appearance="fill">-->
<!--            <mat-label>Pluss punkte</mat-label>-->
<!--            <input id="pointsTrue" type="number" matInput required>-->
<!--          </mat-form-field>-->

<!--          <mat-form-field class="points text-center ml-lg-2" appearance="fill">-->
<!--            <mat-label>Miinus punkte</mat-label>-->
<!--            <input id="pointsFalse" type="number" matInput required>-->
<!--          </mat-form-field>-->

<!--          <br>-->
<!--          <button type="submit" (click)="addQuestion()" class="btn btn-success mr-lg-2 mx-sm-auto">Submit</button>-->
<!--          <button type="reset" class="btn btn-danger ml-lg-2 mx-sm-auto margin-t2-btn margin-l2-btn" (click)="emptyChoices()">Reset Form</button>-->
<!--        </form>-->
<!--      </div>-->
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-4">
        <!-- Trigger Create Multi Answer Modal -->
        <button type="button" class="btn btn-info" (click)="openModalForCreating('custom-modal-2');">
          Loo valikvastustega küsimustik
        </button>
      </div>
      <div class="col-4">
        <!-- Trigger Create Multi Answer Modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createMultiAnswerModal">
          Loo CHECKBOX küsimustik
        </button>
      </div>
      <div class="col-4">
        <!-- Trigger Create Multi Answer Modal -->
        <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#createMultiAnswerModal">
          Loo TEXT
        </button>
      </div>
    </div>
  </div>
</div>



<!-- Edit Multi Answer Modal -->
<!--<div class="modal fade" id="openMultiAnswerModal" tabindex="-1" role="dialog" aria-labelledby="openMultiAnswerModalLabel" aria-hidden="true">-->
<!--  <div class="modal-dialog" role="document">-->
<!--    <div class="modal-content">-->
<!--      <div class="modal-header">-->
<!--        <h5 class="modal-title" id="openMultiAnswerModalLabel">Modal title</h5>-->
<!--        <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--          <span aria-hidden="true">&times;</span>-->
<!--        </button>-->
<!--      </div>-->
<!--      <div class="modal-body">-->
<!--        <div class="col-sm-12 col-md-12 col-lg-12 form text-center">-->
<!--          <h2>Create new Question</h2>-->
<!--          <form class="question-form">-->

<!--            <mat-form-field class="question" appearance="outline">-->
<!--              <mat-label>Question</mat-label>-->
<!--              <input id="question" matInput name="question" type="text" required>-->
<!--            </mat-form-field>-->

<!--            <br>-->

<!--            <mat-form-field class="choices text-center mb-3">-->
<!--              <mat-chip-list #chipList aria-label="Choices">-->
<!--                <mat-chip *ngFor="let choice of choices; let id = index" [selectable]="selectable" [removable]="removable"-->
<!--                          (removed)="remove(choice)" color="green" [ngClass]="setBg(id)" [attr.isSelected]="false" (click)="selectCorrectAnswer(id, choice)" id="choice_{{id}}">-->
<!--                  {{choice.text}}-->
<!--                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>-->
<!--                </mat-chip>-->
<!--                <input [required] placeholder="Valikvastused: vajuta Enter et lisada ja Delete et kustutada. Lisaks vajuta et valida õige vastus"-->
<!--                       [matChipInputFor]="chipList"-->
<!--                       [matChipInputSeparatorKeyCodes]="separatorKeysCodes"-->
<!--                       [matChipInputAddOnBlur]="addOnBlur"-->
<!--                       (matChipInputTokenEnd)="addAnswer($event)">-->
<!--              </mat-chip-list>-->
<!--            </mat-form-field>-->

<!--            <br>-->

<!--            <mat-form-field class="correctAnswer text-center mx-md-auto mr-lg-2 mb-lg-3" style="" appearance="fill">-->
<!--              <mat-label style="">Correct answer</mat-label>-->
<!--              <input id="answer" type="text" matInput name="answer" required>-->
<!--            </mat-form-field>-->

<!--            <mat-form-field class="points text-center ml-lg-2" appearance="fill">-->
<!--              <mat-label>Pluss punkte</mat-label>-->
<!--              <input id="pointsTrue" type="number" matInput required>-->
<!--            </mat-form-field>-->

<!--            <mat-form-field class="points text-center ml-lg-2" appearance="fill">-->
<!--              <mat-label>Miinus punkte</mat-label>-->
<!--              <input id="pointsFalse" type="number" matInput required>-->
<!--            </mat-form-field>-->

<!--            <br>-->
<!--            <div class="modal-footer">-->

<!--              <button type="button" class="btn btn-secondary mx-auto" data-dismiss="modal">Close</button>-->
<!--              <button type="submit" (click)="addQuestion()" class="btn btn-success mx-auto">Submit</button>-->
<!--              <button type="reset" class="btn btn-danger mx-auto" (click)="emptyChoices()">Reset Form</button>-->

<!--            </div>-->
<!--          </form>-->
<!--        </div>-->

<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!-- Create Multi Answer Modal -->
<!--<div class="modal fade" id="createMultiAnswerModal" tabindex="-1" role="dialog" aria-labelledby="createMultiAnswerModalLabel" aria-hidden="true">-->
<!--  <div class="modal-dialog" role="document">-->
<!--    <div class="modal-content">-->
<!--      <div class="modal-header">-->
<!--        <h5 class="modal-title" id="createMultiAnswerModalLabel">Modal title</h5>-->
<!--        <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--          <span aria-hidden="true">&times;</span>-->
<!--        </button>-->
<!--      </div>-->
<!--      <div class="modal-body">-->
<!--        <div class="col-sm-12 col-md-12 col-lg-12 form text-center">-->
<!--          <h2>Create new Question</h2>-->
<!--          <form class="question-form">-->

<!--            <mat-form-field class="question" appearance="outline">-->
<!--              <mat-label>Question</mat-label>-->
<!--              <input id="question" matInput name="question" type="text" required>-->
<!--            </mat-form-field>-->

<!--            <br>-->

<!--            <mat-form-field class="choices text-center mb-3">-->
<!--              <mat-chip-list #chipList aria-label="Choices">-->
<!--                <mat-chip *ngFor="let choice of choices; let id = index" [selectable]="selectable" [removable]="removable"-->
<!--                          (removed)="remove(choice)" color="green" [ngClass]="setBg(id)" [attr.isSelected]="false" (click)="selectCorrectAnswer(id, choice)" id="choice_{{id}}">-->
<!--                  {{choice.text}}-->
<!--                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>-->
<!--                </mat-chip>-->
<!--                <input [required] placeholder="Valikvastused: vajuta Enter et lisada ja Delete et kustutada. Lisaks vajuta et valida õige vastus"-->
<!--                       [matChipInputFor]="chipList"-->
<!--                       [matChipInputSeparatorKeyCodes]="separatorKeysCodes"-->
<!--                       [matChipInputAddOnBlur]="addOnBlur"-->
<!--                       (matChipInputTokenEnd)="addAnswer($event)">-->
<!--              </mat-chip-list>-->
<!--            </mat-form-field>-->

<!--            <br>-->

<!--            <mat-form-field class="correctAnswer text-center mx-md-auto mr-lg-2 mb-lg-3" style="" appearance="fill">-->
<!--              <mat-label style="">Correct answer</mat-label>-->
<!--              <input id="answer" type="text" matInput name="answer" required>-->
<!--            </mat-form-field>-->

<!--            <mat-form-field class="points text-center ml-lg-2" appearance="fill">-->
<!--              <mat-label>Pluss punkte</mat-label>-->
<!--              <input id="pointsTrue" type="number" matInput required>-->
<!--            </mat-form-field>-->

<!--            <mat-form-field class="points text-center ml-lg-2" appearance="fill">-->
<!--              <mat-label>Miinus punkte</mat-label>-->
<!--              <input id="pointsFalse" type="number" matInput required>-->
<!--            </mat-form-field>-->

<!--            <br>-->
<!--            <div class="modal-footer">-->

<!--              <button type="button" class="btn btn-secondary mx-auto" data-dismiss="modal">Close</button>-->
<!--              <button type="submit" (click)="addQuestion()" class="btn btn-success mx-auto">Submit</button>-->
<!--              <button type="reset" class="btn btn-danger mx-auto" (click)="emptyChoices()">Reset Form</button>-->

<!--            </div>-->
<!--          </form>-->
<!--        </div>-->

<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!--TODO edit by question type-->
<!--Question editing-->
<jw-modal id="custom-modal-1">
  <div class="col-sm-12 col-md-12 col-lg-12 form text-center">
    <h2>Muuda küsimust</h2>
    <form class="question-form">

      <mat-form-field class="question" appearance="outline">
        <mat-label>Küsimus</mat-label>
        <input id="question" matInput name="question" type="text" required>
      </mat-form-field>

      <br>

      <mat-form-field class="choices text-center mb-3">
        <mat-chip-list #chipList aria-label="Choices">
          <mat-chip *ngFor="let choice of choices; let id = index" [selectable]="selectable" [removable]="removable"
                    (removed)="remove(choice)" color="green" [ngClass]="setBg(id)" [attr.isSelected]="false" (click)="selectCorrectAnswer(id, choice)" id="choice_{{id}}">
            {{choice.text}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input [required] placeholder="Valikvastused: vajuta Enter et lisada ja Delete et kustutada. Lisaks vajuta et valida õige vastus"
                 [matChipInputFor]="chipList"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 [matChipInputAddOnBlur]="addOnBlur"
                 (matChipInputTokenEnd)="addAnswer($event)">
        </mat-chip-list>
      </mat-form-field>

      <br>

      <mat-form-field class="correctAnswer text-center mx-md-auto mr-lg-2 mb-lg-3" style="" appearance="fill">
        <mat-label style="">Correct answer</mat-label>
        <input id="answer" type="text" matInput name="answer" required>
      </mat-form-field>

      <mat-form-field class="points text-center ml-lg-2" appearance="fill">
        <mat-label>Pluss punkte</mat-label>
        <input id="pointsTrue" type="number" matInput required>
      </mat-form-field>

      <mat-form-field class="points text-center ml-lg-2" appearance="fill">
        <mat-label>Miinus punkte</mat-label>
        <input id="pointsFalse" type="number" matInput required>
      </mat-form-field>

      <br>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary mx-auto" (click)="closeModal('custom-modal-1');">Sulge</button>
<!--        <button type="submit" (click)="addQuestion()" class="btn btn-success mx-auto">Submit</button>-->
        <a (click)="updateQuestion(this.modalService.getElementQuestion())" class="btn btn-outline-info w-auto">Uuenda</a>
        <button type="reset" class="btn btn-danger mx-auto" (click)="emptyChoices()">Tühjenda kõik väljad</button>
      </div>
    </form>
  </div>
</jw-modal>

<!--Valikvastustega-->
<jw-modal id="custom-modal-2">
  <div class="col-sm-12 col-md-12 col-lg-12 form text-center">
    <h2>Loo valikvastustega</h2>
    <form class="question-form">

      <mat-form-field class="question" appearance="outline">
        <mat-label>Küsimus</mat-label>
        <input id="question" matInput name="question" type="text" required>
      </mat-form-field>

      <br>

      <mat-form-field class="choices text-center mb-3">
        <mat-chip-list #chipList aria-label="Choices">
          <mat-chip *ngFor="let choice of choices; let id = index" [selectable]="selectable" [removable]="removable"
                    (removed)="remove(choice)" color="green" [ngClass]="setBg(id)" [attr.isSelected]="false" (click)="selectCorrectAnswer(id, choice)" id="choice_{{id}}">
            {{choice.text}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input [required] placeholder="Valikvastused: vajuta Enter et lisada ja Delete et kustutada. Lisaks vajuta et valida õige vastus"
                 [matChipInputFor]="chipList"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 [matChipInputAddOnBlur]="addOnBlur"
                 (matChipInputTokenEnd)="addAnswer($event)">
        </mat-chip-list>
      </mat-form-field>

      <br>

      <mat-form-field class="correctAnswer text-center mx-md-auto mr-lg-2 mb-lg-3" style="" appearance="fill">
        <mat-label style="">Correct answer</mat-label>
        <input id="answer" type="text" matInput name="answer" required>
      </mat-form-field>

      <mat-form-field class="points text-center ml-lg-2" appearance="fill">
        <mat-label>Pluss punkte</mat-label>
        <input id="pointsTrue" type="number" matInput required>
      </mat-form-field>

      <mat-form-field class="points text-center ml-lg-2" appearance="fill">
        <mat-label>Miinus punkte</mat-label>
        <input id="pointsFalse" type="number" matInput required>
      </mat-form-field>

      <br>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary mx-auto" (click)="closeModal('custom-modal-2');">Sulge</button>
        <button type="submit" (click)="addQuestion()" class="btn btn-success mx-auto">Lisa küsimus</button>
        <button type="reset" class="btn btn-danger mx-auto" (click)="emptyChoices()">Tühjenda kõik väljad</button>
      </div>
    </form>
  </div>
</jw-modal>
